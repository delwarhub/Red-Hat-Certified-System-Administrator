Below are **clear, exam-style, step-by-step solutions** for each of the seven user/group tasks you listed.
Everything is command-level and tested for RHEL-compatible systems.

# ‚úÖ **1. Create a user with a specific UID**

### **Task:** Create user `user1` with UID `12345`.

### **Steps**

```bash
sudo useradd -u 12345 user1
sudo passwd user1
```

### **Verify**

```bash
id user1
```

You should see `uid=12345(user1)`.

# ‚úÖ **2. Create a group and add multiple users to it**

### **Task:** Create group `projectgrp` and add users `user1`, `user2`, `user3`.

### **Steps**

```bash
sudo groupadd projectgrp

sudo usermod -aG projectgrp user1
sudo usermod -aG projectgrp user2
sudo usermod -aG projectgrp user3
```

### **Verify**

```bash
grep projectgrp /etc/group
```

# ‚úÖ **3. Set a password expiration policy (max days, warning days)**

### **Task:** For user `user1`, set:

* Max days: **30**
* Warning: **7**

### **Steps**

```bash
sudo chage -M 30 user1
sudo chage -W 7 user1
```

### **Verify**

```bash
sudo chage -l user1
```
# ‚úÖ **4. Configure a restricted shell**

A restricted shell prevents the user from changing directories, running arbitrary commands, or setting environment variables.

### **Task:** Give user `limited1` a restricted bash shell.

### **Steps**

1. **Create the user**

```bash
sudo useradd limited1
sudo passwd limited1
```

2. **Assign rbash**

```bash
sudo usermod -s /bin/rbash limited1
```

3. **Optional (exam-style): Limit PATH by giving them a controlled environment**

   ```bash
   sudo mkdir -p /home/limited1/bin
   sudo chown limited1:limited1 /home/limited1/bin
   ```

4. **Set PATH inside their `.bash_profile`**

   ```bash
   echo 'PATH=$HOME/bin' | sudo tee -a /home/limited1/.bash_profile
   ```

### **Verify**

Login as the user:

```bash
su - limited1
```

Try commands like `cd` ‚Äî they should fail.

# ‚úÖ **5. Create a user with a primary group and two secondary groups**

### **Task:** Create user `devuser`

* Primary group: `devgrp`
* Secondary groups: `qa`, `docker`

### **Steps**

1. Create the groups (if not already existing):

```bash
sudo groupadd devgrp
sudo groupadd qa
sudo groupadd docker
```

2. Create the user:

```bash
sudo useradd -g devgrp -G qa,docker devuser
sudo passwd devuser
```

### **Verify**

```bash
id devuser
```

# ‚úÖ **6. Lock and unlock user accounts**

### **Task:** Lock and unlock the account of `tempuser`.

### **Steps**

#### **Lock**

```bash
sudo usermod -L tempuser
```

#### **Unlock**

```bash
sudo usermod -U tempuser
```

### **Verify**

```bash
sudo passwd -S tempuser
```

Status will show `L` (locked) or `P` (active).

# ‚úÖ **7. Configure /project directory with group collaboration**

### **Task:**

Configure `/project` so:

* It is **owned by a group** (example: `projectgrp`)
* Group members can **collaborate** (create/edit files)
* Others have **no access**

This requires group ownership + permissions + SGID bit.

### **Steps**

1. **Create the directory**

```bash
sudo mkdir /project
```

2. **Set group ownership**

```bash
sudo chgrp projectgrp /project
```

3. **Set permissions so:**

   * Owner: full access
   * Group: full access
   * Others: no access
   * SGID bit: so files created inherit group

```bash
sudo chmod 2770 /project
```

Where:

* `2` = SGID
* `7` = rwx
* `7` = rwx
* `0` = no access

### **Verify**

```bash
ls -ld /project
```

You should see something like:

```
drwxrws---.  projectgrp
```

The `s` on the group permission confirms SGID is active.

Here‚Äôs a **realistic, exam-style combined scenario** that merges all user/group‚Äìrelated tasks into one workflow ‚Äî exactly the kind of multi-step chain Red Hat expects you to handle under time pressure.
Following that, you‚Äôll get **verification commands for every step** so you can confirm correctness like an examiner would.

# **RHCSA-Style Combined Scenario (User & Group Administration)**

**Complete all tasks exactly as specified. Partial configurations do not count.**

# **üî∑ Scenario**

Your company needs a project environment on a RHEL system.
You must complete the following tasks:

---

## **1Ô∏è‚É£ Create a group called `devteam`.**

## **2Ô∏è‚É£ Create the following users with specific requirements:**

### **User A ‚Äî `alice`**

* UID must be **5501**
* Primary group: `devteam`
* Secondary groups: `qa`, `docker`
* Password must expire every **30** days
* User should receive warnings **7** days before expiry

### **User B ‚Äî `bob`**

* Default UID
* Must be added to the group `devteam`

---

### **User C ‚Äî `restricted1`**

* Must use a **restricted shell (`rbash`)**
* Must have only a private `bin` directory allowed in PATH

## **3Ô∏è‚É£ Lock the account `bob` temporarily.**

## **4Ô∏è‚É£ Create a project directory `/project` with the following rules:**

* Owned by group: **devteam**
* Group must have **full collaboration rights**
* New files inside `/project` must inherit the group automatically
* Other users must have **zero access**

# -------------------------------------------------

# üöÄ **Step-by-Step Commands (Full Solutions)**

---

# **1Ô∏è‚É£ Create the required groups**

```bash
sudo groupadd devteam
sudo groupadd qa
sudo groupadd docker
```

# **2Ô∏è‚É£ Create the users**

## **User A ‚Äî alice**

```bash
sudo useradd -u 5501 -g devteam -G qa,docker alice
sudo passwd alice
sudo chage -M 30 alice
sudo chage -W 7 alice
```

## **User B ‚Äî bob**

```bash
sudo useradd -g devteam bob
sudo passwd bob
```

## **User C ‚Äî restricted1**

### Create user

```bash
sudo useradd restricted1
sudo passwd restricted1
```

### Assign restricted shell

```bash
sudo usermod -s /bin/rbash restricted1
```

### Create private bin directory

```bash
sudo mkdir -p /home/restricted1/bin
sudo chown restricted1:restricted1 /home/restricted1/bin
```

### Restrict PATH

```bash
echo 'PATH=$HOME/bin' | sudo tee -a /home/restricted1/.bash_profile
```

# **3Ô∏è‚É£ Lock bob's account**

```bash
sudo usermod -L bob
```

# **4Ô∏è‚É£ Create and configure `/project` directory**

### Create directory

```bash
sudo mkdir /project
```

### Set group ownership

```bash
sudo chgrp devteam /project
```

### Apply SGID + permissions

```bash
sudo chmod 2770 /project
```

# -------------------------------------------------

# ‚úÖ **Verification Commands (Exactly what examiners check)**

Use these after each task to confirm your work quickly.

# **Verify Groups**

```bash
grep devteam /etc/group
grep qa /etc/group
grep docker /etc/group
```
# **Verify User alice**

```bash
id alice
sudo chage -l alice
```

Expected:

* UID = 5501
* Groups: devteam, qa, docker
* Max days = 30
* Warning = 7

# **Verify User bob**

```bash
id bob
sudo passwd -S bob
```

Expected:

* Group = devteam
* Status shows `L` (locked)

# **Verify restricted user**

```bash
grep restricted1 /etc/passwd
ls -ld /home/restricted1/bin
cat /home/restricted1/.bash_profile
```

Expected:

* Shell = `/bin/rbash`
* `bin` exists and is owned by restricted1
* PATH is set to `$HOME/bin`
  
# **Verify /project directory**

```bash
ls -ld /project
```

Expected:

```
drwxrws---. root devteam /project
```

Look for:

* `s` in group permissions (`rws`)
* Mode `2770`
* Group owner = devteam

Create a file test:

```bash
sudo -u alice touch /project/testfile
ls -l /project/testfile
```

Expected:

* Group should be `devteam` automatically (SGID works)

Test permissions:

```bash
sudo -u bob touch /project/bobfile   # should work
sudo -u restricted1 touch /project/nope # should fail
```
