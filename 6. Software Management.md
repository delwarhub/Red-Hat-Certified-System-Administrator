Below are **clean, exam-ready, step-by-step solutions** for all Software Management tasks using `dnf`, repos, and simple scripting.
These are exactly the workflows Red Hat expects you to know during the RHCSA exam.

---

# ðŸ”µ **1. Configure a new software repository (local or remote)**

RHCSA commonly tests **local repositories** backed by ISO or a directory.

---

## **Option A â€” Local repository from an ISO**

### 1. Mount the ISO

```bash
sudo mkdir -p /mnt/iso
sudo mount /dev/cdrom /mnt/iso
```

### 2. Create a repo file

```bash
sudo nano /etc/yum.repos.d/local.repo
```

Add:

```
[localrepo]
name=Local Repo
baseurl=file:///mnt/iso
enabled=1
gpgcheck=0
```

### 3. Verify repo works

```bash
sudo dnf clean all
sudo dnf repolist
```

---

## **Option B â€” Remote HTTP repository**

```bash
sudo nano /etc/yum.repos.d/remote.repo
```

Example:

```
[remoterepo]
name=Remote HTTP Repo
baseurl=http://mirror.corp.example.com/rhel9/
enabled=1
gpgcheck=1
gpgkey=http://mirror.corp.example.com/RPM-GPG-KEY-redhat
```

Verify:

```bash
sudo dnf repolist
```

---

# ðŸ”µ **2. Install a specific version of a package**

List available versions:

```bash
sudo dnf list httpd --showduplicates
```

Install a specific version:

```bash
sudo dnf install httpd-2.4.57-5.el9
```

Verify:

```bash
rpm -q httpd
```

---

# ðŸ”µ **3. Remove a package and verify all dependencies**

Remove:

```bash
sudo dnf remove httpd
```

DNF will show **which dependencies are removed**; confirm when appropriate.

Verify:

```bash
rpm -q httpd
```

Should return:

```
package httpd is not installed
```

List orphaned deps (optional but useful):

```bash
sudo dnf repoquery --unneeded
```

---

# ðŸ”µ **4. Query which package a file belongs to**

### Example: find the package owning `/usr/bin/ls`

```bash
rpm -qf /usr/bin/ls
```

### Or search by filename if you donâ€™t know location:

```bash
sudo dnf provides */sshd
```

This is extremely useful during the exam for troubleshooting.

---

# ðŸ”µ **5. Create a simple bash script that installs a package list automatically**

### Example: Install packages defined in a text file

### 1. Create a list:

```bash
echo -e "vim\ngit\nhttpd" > /root/pkglist.txt
```

### 2. Create script `/root/install_pkgs.sh`

```bash
sudo nano /root/install_pkgs.sh
```

Add:

```bash
#!/bin/bash

PKGLIST="/root/pkglist.txt"

while read pkg; do
    echo "Installing $pkg..."
    dnf install -y $pkg
done < "$PKGLIST"
```

### 3. Make script executable:

```bash
sudo chmod +x /root/install_pkgs.sh
```

### 4. Run script:

```bash
sudo /root/install_pkgs.sh
```

### Verify:

```bash
rpm -q vim git httpd
```

---

# ðŸŸ¢ **Quick RHCSA Software Management Cheat Sheet**

| Task                   | Command                         |
| ---------------------- | ------------------------------- |
| List repos             | `dnf repolist`                  |
| Install version        | `dnf install pkg-1.2.3`         |
| Remove package         | `dnf remove pkg`                |
| File â†’ package         | `rpm -qf /path/to/file`         |
| Search file in repos   | `dnf provides */file`           |
| List specific versions | `dnf list pkg --showduplicates` |
| Create repo            | `/etc/yum.repos.d/*.repo`       |

---

Here are **three advanced RHCSA-style exercises** covering Software Management:

1ï¸âƒ£ A **full exam-style scenario**
2ï¸âƒ£ A **rapid-fire 2-minute command drill**
3ï¸âƒ£ A **DNF troubleshooting exam** (GPG errors, repo failures, broken dependencies)

All three mirror the complexity and pressure of real RHCSA tasks.

---

# ðŸ”¥ **1ï¸âƒ£ Software Management â€“ Full RHCSA Exam Scenario**

You are the administrator of a RHEL system. Your organization requires new repositories, package installation rules, version management, and cleanup. Complete all tasks exactly as written.

---

# **ðŸ”· Scenario**

## **A. Configure a Local Repository**

* The system ISO is mounted at `/mnt/rhel9`
* Create a repository named **local-base** pointing to the ISO
* Repo must be **enabled**, **gpgcheck=0**

## **B. Configure a Remote Repository**

* Repo name: **tools-repo**
* BaseURL: `http://repo.internal.corp/tools/`
* Repo must be **enabled**, **GPG check ON**
* GPG key located at: `http://repo.internal.corp/RPM-GPG-KEY-internal`

## **C. Install Specific Software Versions**

* Install **httpd version 2.4.57-5.el9**
* Install **vim-enhanced latest available version**

## **D. Remove Software & Dependencies**

* Remove **httpd** and all dependencies brought with it

## **E. Identify a Fileâ€™s Package**

* Determine which package owns `/usr/bin/less`

## **F. Automate Package Installation**

* Create script `/root/autoinstall.sh`
* Script reads `/root/packages.txt`
* Installs every package listed using `dnf install -y`

---

# **âœ” Expected Solution**

### **A. Local Repo**

```bash
sudo nano /etc/yum.repos.d/local-base.repo
```

Add:

```
[local-base]
name=Local Base Repo
baseurl=file:///mnt/rhel9
enabled=1
gpgcheck=0
```

Test:

```bash
dnf clean all
dnf repolist
```

---

### **B. Remote Repo**

```bash
sudo nano /etc/yum.repos.d/tools.repo
```

Add:

```
[tools-repo]
name=Tools Repo
baseurl=http://repo.internal.corp/tools/
enabled=1
gpgcheck=1
gpgkey=http://repo.internal.corp/RPM-GPG-KEY-internal
```

---

### **C. Install versions**

```bash
dnf list httpd --showduplicates
dnf install -y httpd-2.4.57-5.el9
dnf install -y vim-enhanced
```

---

### **D. Remove software**

```bash
dnf remove -y httpd
```

---

### **E. File â†’ package**

```bash
rpm -qf /usr/bin/less
```

---

### **F. Install script**

Create list:

```bash
echo -e "git\nwget\nrsync" > /root/packages.txt
```

Create script:

```bash
nano /root/autoinstall.sh
```

Add:

```bash
#!/bin/bash
PKGLIST="/root/packages.txt"
while read pkg; do
    echo "Installing $pkg..."
    dnf install -y $pkg
done < "$PKGLIST"
```

Make executable:

```bash
chmod +x /root/autoinstall.sh
```

Run:

```bash
/root/autoinstall.sh
```

---

# ----------------------------------------------------

# ðŸ”¥ **2ï¸âƒ£ Rapid-Fire Software Management Drill (Finish in 2 Minutes)**

You should answer these without thinking; this is pure command recall.

---

### **1. List all enabled repos**

```
dnf repolist
```

### **2. Install a specific version of bash**

```
dnf install bash-5.1.8
```

### **3. Remove a package**

```
dnf remove nginx
```

### **4. List available versions of a package**

```
dnf list kernel --showduplicates
```

### **5. File â†’ Package query**

```
rpm -qf /usr/bin/cat
```

### **6. Search for package providing a file**

```
dnf provides */sshd_config
```

### **7. Disable a repo**

```
dnf config-manager --set-disabled epel
```

### **8. Show package info**

```
dnf info vim
```

### **9. Clean metadata**

```
dnf clean all
```

### **10. Check dependencies before removal**

```
dnf repoquery --requires httpd
```

You should be able to run all these **in under 2 minutes**.

---

# ----------------------------------------------------

# ðŸ”¥ **3ï¸âƒ£ DNF Troubleshooting Exam (GPG Issues, Broken Repos, Failed Imports)**

These mimic the real exam where a repo breaks and you must fix it FAST.

---

# **ðŸ”· Scenario**

Users report they cannot install software.
Running `dnf install` gives errors.

You must fix all issues.

---

## **ðŸŸ¥ Problem 1 â€” GPG Key Failure**

Error:

```
Public key for bash-5.1.8.rpm is not installed
```

## âœ” Fix:

Find the missing key:

```bash
dnf install bash
```

It will show the required key ID (e.g., `RSA/SHA256 Key ID abc123`)

Import key:

```bash
rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
```

Or import remote:

```bash
rpm --import http://repo.internal.corp/RPM-GPG-KEY-internal
```

Retry:

```bash
dnf install bash
```

---

## **ðŸŸ¥ Problem 2 â€” Broken repo link**

Error:

```
Cannot download repomd.xml... All mirrors were tried
```

## âœ” Fix:

Open the repo file:

```bash
nano /etc/yum.repos.d/bad.repo
```

Check:

* baseurl
* enabled=1
* syntax correct
* no trailing slash errors

Test fix:

```bash
dnf clean all
dnf repolist
```

---

## **ðŸŸ¥ Problem 3 â€” Metadata expired or corrupted**

Error:

```
Metadata file does not match checksum
```

## âœ” Fix:

```bash
dnf clean metadata
dnf clean all
dnf makecache
```

---

## **ðŸŸ¥ Problem 4 â€” Dependency issues**

Error:

```
nothing provides libX.so.1 needed by examplepkg
```

## âœ” Fix:

Check dependencies:

```bash
dnf repoquery --requires examplepkg
```

Check what provides missing library:

```bash
dnf provides */libX.so.1
```

Install provider:

```bash
dnf install libX
```

---

## **ðŸŸ¥ Problem 5 â€” Repo disabled accidentally**

Error:

```
No match for argument: httpd
```

Fix:

```bash
dnf config-manager --set-enabled local-base
dnf repolist
```

